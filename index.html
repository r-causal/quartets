<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="In the spirit of Anscombes quartet, this package includes datasets
   that demonstrate the importance of visualizing your data, the importance of 
   not relying on statistical summary measures alone, and why additional 
   assumptions about the data generating mechanism are needed when estimating 
   causal effects. The package includes &quot;Anscombes Quartet&quot; (Anscombe 1973) &lt;doi:10.1080/00031305.1973.10478966&gt;,
   D'Agostino McGowan &amp; Barrett (2023) &quot;Causal Quartet&quot; &lt;doi:10.48550/arXiv.2304.02683&gt;, 
   &quot;Datasaurus Dozen&quot; (Matejka &amp; Fitzmaurice 2017), &quot;Interaction Triptych&quot; (Rohrer &amp; Arslan 2021) &lt;doi:10.1177/25152459211007368&gt;, &quot;Rashomon Quartet&quot; (Biecek et al. 2023) &lt;doi:10.48550/arXiv.2302.13356&gt;, and
   Gelman &quot;Variation and Heterogeneity Causal Quartets&quot; (Gelman et al. 2023) &lt;doi:10.48550/arXiv.2302.12878&gt;.">
<title>Datasets to Help Teach Statistics • quartets</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Datasets to Help Teach Statistics">
<meta property="og:description" content="In the spirit of Anscombes quartet, this package includes datasets
   that demonstrate the importance of visualizing your data, the importance of 
   not relying on statistical summary measures alone, and why additional 
   assumptions about the data generating mechanism are needed when estimating 
   causal effects. The package includes &quot;Anscombes Quartet&quot; (Anscombe 1973) &lt;doi:10.1080/00031305.1973.10478966&gt;,
   D'Agostino McGowan &amp; Barrett (2023) &quot;Causal Quartet&quot; &lt;doi:10.48550/arXiv.2304.02683&gt;, 
   &quot;Datasaurus Dozen&quot; (Matejka &amp; Fitzmaurice 2017), &quot;Interaction Triptych&quot; (Rohrer &amp; Arslan 2021) &lt;doi:10.1177/25152459211007368&gt;, &quot;Rashomon Quartet&quot; (Biecek et al. 2023) &lt;doi:10.48550/arXiv.2302.13356&gt;, and
   Gelman &quot;Variation and Heterogeneity Causal Quartets&quot; (Gelman et al. 2023) &lt;doi:10.48550/arXiv.2302.12878&gt;.">
<meta property="og:image" content="https://r-causal.github.io/quartets/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">quartets</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/a-collider-example-in-a-medical-context.html">A collider example in a medical context</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-causal/quartets/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="quartets-datasets-to-help-teach-statistics-">quartets: Datasets to help teach statistics <a class="anchor" aria-label="anchor" href="#quartets-datasets-to-help-teach-statistics-"></a>
</h1>
</div>
<!-- badges: start -->

<p><strong>Authors:</strong> <a href="https://www.lucymcgowan.com/" class="external-link">Lucy D’Agostino McGowan</a><br><strong>License:</strong> <a href="https://opensource.org/license/mit/" class="external-link">MIT</a></p>
<p>The quartets package is a collection of datasets aimed to help data analysis practitioners and students learn key statistical insights in a hands-on manner. It contains:</p>
<ul>
<li><a href="README.qmd#sec-anscombe">Anscombe’s Quartet</a></li>
<li>Causal Quartet</li>
<li>Datasaurus Dozen</li>
<li>Interaction Triptych</li>
<li>Rashomon Quartet</li>
<li>Gelman Variation and Heterogeneity Causal Quartets</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the quartets package from CRAN as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"quartets"</span><span class="op">)</span></span></code></pre></div>
<p>Or the development version of quartets like so:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"r-causal/quartets"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="anscombes-quartet">Anscombe’s Quartet<a class="anchor" aria-label="anchor" href="#anscombes-quartet"></a>
</h2>
<p>The goal of the <code>anscombe_quartet</code> data set is to help drive home the point that visualizing your data is important. Francis Anscombe generated these four datasets to demonstrate that statistical summary measures alone cannot capture the full relationship between two variables (here, <code>x</code> and <code>y</code>). Anscombe emphasized the importance of visualizing data prior to calculating summary statistics.</p>
<ul>
<li>Dataset 1 has a linear relationship between <code>x</code> and <code>y</code><br>
</li>
<li>Dataset 2 has shows a nonlinear relationship between <code>x</code> and <code>y</code><br>
</li>
<li>Dataset 3 has a linear relationship between <code>x</code> and <code>y</code> with a single outlier<br>
</li>
<li>Dataset 4 has shows no relationship between <code>x</code> and <code>y</code> with a single outlier that serves as a high-leverage point.</li>
</ul>
<p>In each of the datasets the following statistical summaries hold:</p>
<ul>
<li>mean of <code>x</code>: 9<br>
</li>
<li>variance of <code>x</code>: 11<br>
</li>
<li>mean of <code>y</code>: 7.5<br>
</li>
<li>variance of y: 4.125<br>
</li>
<li>correlation between <code>x</code> and <code>y</code>: 0.816<br>
</li>
<li>linear regression between <code>x</code> and <code>y</code>: <code>y = 3 + 0.5x</code><br>
</li>
<li>
<span class="math inline"><em>R</em><sup>2</sup></span> for the regression: 0.67</li>
</ul>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-causal/quartets" class="external-link">quartets</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">anscombe_quartet</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, formula <span class="op">=</span> <span class="st">"y ~ x"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">dataset</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-2-1.png" style="width:100.0%"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">anscombe_quartet</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>            var_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>            mean_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span>
<span>            var_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span>
<span>            cor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">dataset</th>
<th align="right">mean_x</th>
<th align="right">var_x</th>
<th align="right">mean_y</th>
<th align="right">var_y</th>
<th align="right">cor</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(1) Linear</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">7.5</td>
<td align="right">4.13</td>
<td align="right">0.82</td>
</tr>
<tr class="even">
<td align="left">(2) Nonlinear</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">7.5</td>
<td align="right">4.13</td>
<td align="right">0.82</td>
</tr>
<tr class="odd">
<td align="left">(3) Outlier</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">7.5</td>
<td align="right">4.12</td>
<td align="right">0.82</td>
</tr>
<tr class="even">
<td align="left">(4) Leverage</td>
<td align="right">9</td>
<td align="right">11</td>
<td align="right">7.5</td>
<td align="right">4.12</td>
<td align="right">0.82</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="causal-quartet">Causal Quartet<a class="anchor" aria-label="anchor" href="#causal-quartet"></a>
</h2>
<p>The goal of the <code>causal_quartet</code> data set is to help drive home the point that when presented with an exposure, outcome, and some measured factors, statistics alone, whether summary statistics or data visualizations, are not sufficient to determine the appropriate causal estimate. Additional information about the data generating mechanism is needed in order to draw the correct conclusions. See <a href="https://github.com/LucyMcGowan/writing-quartet/blob/main/manuscript.pdf" class="external-link">this paper</a> for details.</p>
</div>
<div class="section level2">
<h2 id="example-1">Example<a class="anchor" aria-label="anchor" href="#example-1"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">causal_quartet</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">exposure</span>, y <span class="op">=</span> <span class="va">outcome</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, formula <span class="op">=</span> <span class="st">"y ~ x"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">dataset</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-3-1.png" style="width:100.0%"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">causal_quartet</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">nest_by</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>`Y ~ X` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">exposure</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>         `Y ~ X + Z` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">exposure</span> <span class="op">+</span> <span class="va">covariate</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>         `Correlation of X and Z` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">data</span><span class="op">$</span><span class="va">exposure</span>, <span class="va">data</span><span class="op">$</span><span class="va">covariate</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">data</span>, `Data generating mechanism` <span class="op">=</span> <span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="38%">
<col width="11%">
<col width="16%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th align="left">Data generating mechanism</th>
<th align="right">Y ~ X</th>
<th align="right">Y ~ X + Z</th>
<th align="right">Correlation of X and Z</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(1) Collider</td>
<td align="right">1</td>
<td align="right">0.55</td>
<td align="right">0.7</td>
</tr>
<tr class="even">
<td align="left">(2) Confounder</td>
<td align="right">1</td>
<td align="right">0.50</td>
<td align="right">0.7</td>
</tr>
<tr class="odd">
<td align="left">(3) Mediator</td>
<td align="right">1</td>
<td align="right">0.00</td>
<td align="right">0.7</td>
</tr>
<tr class="even">
<td align="left">(4) M-Bias</td>
<td align="right">1</td>
<td align="right">0.88</td>
<td align="right">0.7</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="datasaurus-dozen">Datasaurus Dozen<a class="anchor" aria-label="anchor" href="#datasaurus-dozen"></a>
</h2>
<p>Similar to Anscombe’s Quartet, the Datasaurus Dozen has additional data sets where the mean, variance, and Pearson’s correlation are identical, but visualizations demonstrate the large difference between datasets. This dataset is re-exported from the <a href="https://CRAN.R-project.org/package=datasauRus" class="external-link">datasauRus</a> R package.</p>
</div>
<div class="section level2">
<h2 id="example-2">Example<a class="anchor" aria-label="anchor" href="#example-2"></a>
</h2>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">datasaurus_dozen</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, formula <span class="op">=</span> <span class="st">"y ~ x"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">dataset</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" style="width:100.0%"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">datasaurus_dozen</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>            var_x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>,</span>
<span>            mean_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span>
<span>            var_y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>,</span>
<span>            cor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">dataset</th>
<th align="right">mean_x</th>
<th align="right">var_x</th>
<th align="right">mean_y</th>
<th align="right">var_y</th>
<th align="right">cor</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">away</td>
<td align="right">54.27</td>
<td align="right">281.23</td>
<td align="right">47.83</td>
<td align="right">725.75</td>
<td align="right">-0.06</td>
</tr>
<tr class="even">
<td align="left">bullseye</td>
<td align="right">54.27</td>
<td align="right">281.21</td>
<td align="right">47.83</td>
<td align="right">725.53</td>
<td align="right">-0.07</td>
</tr>
<tr class="odd">
<td align="left">circle</td>
<td align="right">54.27</td>
<td align="right">280.90</td>
<td align="right">47.84</td>
<td align="right">725.23</td>
<td align="right">-0.07</td>
</tr>
<tr class="even">
<td align="left">dino</td>
<td align="right">54.26</td>
<td align="right">281.07</td>
<td align="right">47.83</td>
<td align="right">725.52</td>
<td align="right">-0.06</td>
</tr>
<tr class="odd">
<td align="left">dots</td>
<td align="right">54.26</td>
<td align="right">281.16</td>
<td align="right">47.84</td>
<td align="right">725.24</td>
<td align="right">-0.06</td>
</tr>
<tr class="even">
<td align="left">h_lines</td>
<td align="right">54.26</td>
<td align="right">281.10</td>
<td align="right">47.83</td>
<td align="right">725.76</td>
<td align="right">-0.06</td>
</tr>
<tr class="odd">
<td align="left">high_lines</td>
<td align="right">54.27</td>
<td align="right">281.12</td>
<td align="right">47.84</td>
<td align="right">725.76</td>
<td align="right">-0.07</td>
</tr>
<tr class="even">
<td align="left">slant_down</td>
<td align="right">54.27</td>
<td align="right">281.12</td>
<td align="right">47.84</td>
<td align="right">725.55</td>
<td align="right">-0.07</td>
</tr>
<tr class="odd">
<td align="left">slant_up</td>
<td align="right">54.27</td>
<td align="right">281.19</td>
<td align="right">47.83</td>
<td align="right">725.69</td>
<td align="right">-0.07</td>
</tr>
<tr class="even">
<td align="left">star</td>
<td align="right">54.27</td>
<td align="right">281.20</td>
<td align="right">47.84</td>
<td align="right">725.24</td>
<td align="right">-0.06</td>
</tr>
<tr class="odd">
<td align="left">v_lines</td>
<td align="right">54.27</td>
<td align="right">281.23</td>
<td align="right">47.84</td>
<td align="right">725.64</td>
<td align="right">-0.07</td>
</tr>
<tr class="even">
<td align="left">wide_lines</td>
<td align="right">54.27</td>
<td align="right">281.23</td>
<td align="right">47.83</td>
<td align="right">725.65</td>
<td align="right">-0.07</td>
</tr>
<tr class="odd">
<td align="left">x_shape</td>
<td align="right">54.26</td>
<td align="right">281.23</td>
<td align="right">47.84</td>
<td align="right">725.22</td>
<td align="right">-0.07</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="interaction-triptych">Interaction Triptych<a class="anchor" aria-label="anchor" href="#interaction-triptych"></a>
</h2>
<p>This set of 3 datasets demonstrating that while the slopes estimated by a simple linear interaction model may be the same, the underlying data-generating mechanisms can be vastly different.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">interaction_triptych</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"o"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"lm"</span>, formula <span class="op">=</span> <span class="st">"y ~ x"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">dataset</span> <span class="op">~</span> <span class="va">moderator</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-6-1.png" style="width:100.0%"></p>
</div>
<div class="section level2">
<h2 id="rashomon-quartet">Rashomon Quartet<a class="anchor" aria-label="anchor" href="#rashomon-quartet"></a>
</h2>
<p>This dataset demonstrates that model diagnostics alone (such as <span class="math inline"><em>R</em><sup>2</sup></span> and RMSE) do not tell the full story of a prediction model. Here, there are three predictors and one outcome. Models fit using a regression tree, linear regression, random forest, and neural network all yield the same <span class="math inline"><em>R</em><sup>2</sup></span> and RMSE, but are finding different relationships between the predictors, as evidenced by the below partial dependence plots.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1568</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org" class="external-link">tidymodels</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ModelOriented.github.io/DALEXtra/" class="external-link">DALEXtra</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rec</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">rashomon_quartet_train</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Regression Tree</span></span>
<span></span>
<span><span class="va">wf_tree</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">rec</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_model</span><span class="op">(</span></span>
<span>    <span class="fu">decision_tree</span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"regression"</span>, engine <span class="op">=</span> <span class="st">"rpart"</span>,</span>
<span>                  tree_depth <span class="op">=</span> <span class="fl">3</span>, min_n <span class="op">=</span> <span class="fl">250</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">tree</span> <span class="op">&lt;-</span> <span class="fu">fit</span><span class="op">(</span><span class="va">wf_tree</span>, <span class="va">rashomon_quartet_train</span><span class="op">)</span></span>
<span><span class="va">exp_tree</span> <span class="op">&lt;-</span> <span class="fu">explain_tidymodels</span><span class="op">(</span></span>
<span>  <span class="va">tree</span>, </span>
<span>  data <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>  y <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  label <span class="op">=</span> <span class="st">"decision tree"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Linear Model</span></span>
<span></span>
<span><span class="va">wf_linear</span> <span class="op">&lt;-</span> <span class="va">wf_tree</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">update_model</span><span class="op">(</span><span class="fu">linear_reg</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lin</span> <span class="op">&lt;-</span> <span class="fu">fit</span><span class="op">(</span><span class="va">wf_linear</span>, <span class="va">rashomon_quartet_train</span><span class="op">)</span></span>
<span><span class="va">exp_lin</span> <span class="op">&lt;-</span> <span class="fu">explain_tidymodels</span><span class="op">(</span></span>
<span>  <span class="va">lin</span>, </span>
<span>  data <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>  y <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  label <span class="op">=</span> <span class="st">"linear regression"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Random Forest</span></span>
<span></span>
<span><span class="va">wf_rf</span> <span class="op">&lt;-</span> <span class="va">wf_tree</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">update_model</span><span class="op">(</span><span class="fu">rand_forest</span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"regression"</span>, </span>
<span>                           engine <span class="op">=</span> <span class="st">"randomForest"</span>, </span>
<span>                           trees <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rf</span> <span class="op">&lt;-</span> <span class="fu">fit</span><span class="op">(</span><span class="va">wf_rf</span>, <span class="va">rashomon_quartet_train</span><span class="op">)</span></span>
<span><span class="va">exp_rf</span> <span class="op">&lt;-</span> <span class="fu">explain_tidymodels</span><span class="op">(</span></span>
<span>  <span class="va">rf</span>, </span>
<span>  data <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>  y <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  label <span class="op">=</span> <span class="st">"random forest"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Neural Network</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bips-hb/neuralnet" class="external-link">neuralnet</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'neuralnet'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     compute</span></span>
<span><span class="va">nn</span> <span class="op">&lt;-</span> <span class="fu">neuralnet</span><span class="op">(</span></span>
<span>  <span class="va">y</span> <span class="op">~</span> <span class="va">.</span>, </span>
<span>  data <span class="op">=</span> <span class="va">rashomon_quartet_train</span>, </span>
<span>  hidden <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span><span class="op">)</span>, </span>
<span>  threshold <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_nn</span> <span class="op">&lt;-</span> <span class="fu">explain_tidymodels</span><span class="op">(</span></span>
<span>  <span class="va">nn</span>, </span>
<span>  data <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>  y <span class="op">=</span> <span class="va">rashomon_quartet_test</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  label <span class="op">=</span> <span class="st">"neural network"</span><span class="op">)</span></span></code></pre></div>
<p>We can see that each of these models “perform” the same.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">exp_tree</span>, <span class="va">exp_lin</span>, <span class="va">exp_rf</span>, <span class="va">exp_nn</span><span class="op">)</span>, <span class="va">model_performance</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Decision tree"</span>, <span class="st">"Linear regression"</span>, <span class="st">"Random forest"</span>, <span class="st">"Neural network"</span><span class="op">)</span>,</span>
<span>  R2 <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">mp</span>, <span class="op">~</span><span class="va">.x</span><span class="op">$</span><span class="va">measures</span><span class="op">$</span><span class="va">r2</span><span class="op">)</span>,</span>
<span>  RMSE <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dbl</a></span><span class="op">(</span><span class="va">mp</span>, <span class="op">~</span><span class="va">.x</span><span class="op">$</span><span class="va">measures</span><span class="op">$</span><span class="va">rmse</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">model</th>
<th align="right">R2</th>
<th align="right">RMSE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Decision tree</td>
<td align="right">0.73</td>
<td align="right">0.35</td>
</tr>
<tr class="even">
<td align="left">Linear regression</td>
<td align="right">0.73</td>
<td align="right">0.35</td>
</tr>
<tr class="odd">
<td align="left">Random forest</td>
<td align="right">0.73</td>
<td align="right">0.35</td>
</tr>
<tr class="even">
<td align="left">Neural network</td>
<td align="right">0.73</td>
<td align="right">0.35</td>
</tr>
</tbody>
</table>
<p>But the way they fit to the actual predictors is quite different:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pd_tree</span> <span class="op">&lt;-</span> <span class="fu">model_profile</span><span class="op">(</span><span class="va">exp_tree</span>, N<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">pd_lin</span> <span class="op">&lt;-</span> <span class="fu">model_profile</span><span class="op">(</span><span class="va">exp_lin</span>, N<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">pd_rf</span> <span class="op">&lt;-</span> <span class="fu">model_profile</span><span class="op">(</span><span class="va">exp_rf</span>, N<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="va">pd_nn</span> <span class="op">&lt;-</span> <span class="fu">model_profile</span><span class="op">(</span><span class="va">exp_nn</span>, N<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">pd_tree</span>, <span class="va">pd_nn</span>, <span class="va">pd_rf</span>, <span class="va">pd_lin</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" style="width:100.0%"></p>
</div>
<div class="section level2">
<h2 id="gelman-variation-and-heterogeneity-causal-quartets">Gelman Variation and Heterogeneity Causal Quartets<a class="anchor" aria-label="anchor" href="#gelman-variation-and-heterogeneity-causal-quartets"></a>
</h2>
<p>The first set of data <code>variation_causal_quartet</code> demonstrates that you can get the same average treatment effect despite variability across some pre-treatment characteristic (here called <code>z</code>).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">variation_causal_quartet</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">covariate</span>, y <span class="op">=</span> <span class="va">outcome</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">exposure</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">dataset</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"exposure group"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" style="width:100.0%"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">variation_causal_quartet</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">nest_by</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">exposure</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">data</span>, <span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">dataset</th>
<th align="right">ATE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(1) Constant effect</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">(2) Low variation</td>
<td align="right">0.1</td>
</tr>
<tr class="odd">
<td align="left">(3) High variation</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">(4) Occasional large effects</td>
<td align="right">0.1</td>
</tr>
</tbody>
</table>
<p>The <code>heterogeneous_causal_quartet</code> demonstrates how you can observe the same causal effect under different patterns of treatment heterogeneity.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">heterogeneous_causal_quartet</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">covariate</span>, y <span class="op">=</span> <span class="va">outcome</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">exposure</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">dataset</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"exposure group"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" style="width:100.0%"></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">heterogeneous_causal_quartet</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nest_by.html" class="external-link">nest_by</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ATE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">outcome</span> <span class="op">~</span> <span class="va">exposure</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">data</span>, <span class="va">dataset</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">dataset</th>
<th align="right">ATE</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">(1) Linear interaction</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">(2) No effect then steady increase</td>
<td align="right">0.1</td>
</tr>
<tr class="odd">
<td align="left">(3) Plateau</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">(4) Intermediate zone with large effects</td>
<td align="right">0.1</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Anscombe, F. J. (1973). “Graphs in Statistical Analysis”. American Statistician. 27 (1): 17–21. <a href="doi:10.1080/00031305.1973.10478966" class="uri">doi:10.1080/00031305.1973.10478966</a>. JSTOR 2682899.</p>
<p>Biecek P, Baniecki H, Krzyziński M, Cook D (2023). Performance is not enough: the story of Rashomon’s quartet. Preprint arXiv:2302.13356v2.</p>
<p>D’Agostino McGowan L, Barrett M (2023). Causal inference is not a statistical problem. Preprint arXiv:2304.02683v1.</p>
<p>Davies R, Locke S, D’Agostino McGowan L (2022). <em>datasauRus: Datasets from the Datasaurus Dozen</em>. R package version 0.1.6, <a href="https://CRAN.R-project.org/package=datasauRus" class="external-link uri">https://CRAN.R-project.org/package=datasauRus</a>.</p>
<p>Gelman, A., Hullman, J., &amp; Kennedy, L. (2023). Causal quartets: Different ways to attain the same average treatment effect. arXiv preprint arXiv:2302.12878.</p>
<p>Hullman J (2023). <em>causalQuartet: Create Causal Quartets for Interrogating Average Treatment Effects</em>. R package version 0.0.0.9000.</p>
<p>Matejka, J., &amp; Fitzmaurice, G. (2017). Same Stats, Different Graphs: Generating Datasets with Varied Appearance and Identical Statistics through Simulated Annealing. CHI 2017 Conference proceedings: ACM SIGCHI Conference on Human Factors in Computing Systems. Retrieved from <a href="https://www.autodesk.com/research/publications/same-stats-different-graphs" class="external-link uri">https://www.autodesk.com/research/publications/same-stats-different-graphs</a></p>
<p>Rohrer, Julia M., and Ruben C. Arslan. “Precise answers to vague questions: Issues with interactions.” Advances in Methods and Practices in Psychological Science 4.2 (2021): 25152459211007368.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=quartets" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-causal/quartets/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-causal/quartets/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing quartets</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lucy D'Agostino McGowan <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-6983-2759" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/r-causal/quartets/actions" class="external-link"><img src="https://github.com/r-causal/quartets/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lucy D’Agostino McGowan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
